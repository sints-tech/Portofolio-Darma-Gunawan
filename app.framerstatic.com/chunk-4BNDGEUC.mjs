import{a as o}from"https://app.framerstatic.com/chunk-IJ25RF36.mjs";async function n(){try{return await navigator.permissions.query({name:"storage-access"})}catch{return{state:"prompt"}}}function c(){switch(window.location.origin){case"https://edit.framerlocal.com:8080":return"local";case"https://edit.development.framer.com":return"development";default:return"production"}}function a(){let e=new URL(window.location.href);e.searchParams.set("cookieMonsterDone","true");let t=new URL(window.location.origin);t.pathname="/cookie-monster",t.searchParams.set("continue",e.toString()),window.location.href=t.toString()}async function i(){let e=await fetch(`${o().api}/auth/web/access-token`,{credentials:"include"});if(!e.ok)return;let t=await e.json(),{accessToken:s}=t;return s}async function u(e){try{let{jwtDecode:t}=await import("https://app.framerstatic.com/esm-IDHGXJI7.mjs");return t(e).userId}catch{return}}async function w(e){if("hasStorageAccess"in document&&!await document.hasStorageAccess())if((await n()).state==="granted")await document.requestStorageAccess();else return{status:"unknown"};let t=await i();if(!t)return{status:"no-auth"};let[s,r]=await Promise.all([u(t),fetch(`${o().api}/edit/sites/${e}/access`,{headers:{Authorization:`Bearer ${t}`}})]);if(!r.ok)switch(r.status){case 401:return c()==="development"&&new URLSearchParams(window.location.search).get("cookieMonsterDone")!=="true"?(a(),{status:"error"}):{status:"no-auth"};case 404:return{status:"no-access",userId:s};default:return{status:"error"}}return{status:"success",data:await r.json(),userId:s}}export{w as a};
//# sourceMappingURL=https://app.framerstatic.com/chunk-4BNDGEUC.mjs.map
